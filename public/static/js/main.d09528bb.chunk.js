(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a.p+"static/media/logo.92e3d586.png"},43:function(e,t,a){e.exports=a(98)},6:function(e,t,a){},91:function(e,t){},94:function(e,t,a){e.exports=a.p+"static/media/c1.08f485f8.png"},95:function(e,t,a){e.exports=a.p+"static/media/c2.e39182dc.png"},96:function(e,t,a){e.exports=a.p+"static/media/c3.d7f34546.png"},97:function(e,t,a){e.exports=a.p+"static/media/c4.42406667.png"},98:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(41),c=a.n(r),o=a(1),i=a(2),l=a(4),u=a(3),m=a(5),p=(a(6),a(8)),h=a.n(p),g=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("p",{className:"App-title"},"Question ",this.props.number,":"),s.a.createElement("p",{className:"App-subtitle"},this.props.content),s.a.createElement("div",{className:"game-btn-container"},s.a.createElement("button",{onClick:function(){return e.props.answerQuestion(!0)},className:"main-btn game possitive"},"YES"),s.a.createElement("button",{onClick:function(){return e.props.answerQuestion(!1)},className:"main-btn game negetive"},"NO")))}}]),t}(n.Component),f=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=[];return e=(e=e.concat(this.props.questions)).reverse(),s.a.createElement("div",null,this.props.questions.length>0?s.a.createElement("p",{className:"App-subtitle game-question-title"},"Question History"):null,s.a.createElement("ul",{className:"game-question-history-container"},e.map(function(e,t){return"answer"in e?s.a.createElement("li",{key:"question-list-"+t},s.a.createElement("p",{className:"game-question-history-title"},e.content),e.answer?s.a.createElement("p",{className:"game-question-history-answer positive"},"Yes"):s.a.createElement("p",{className:"game-question-history-answer negetive"},"No")):null})))}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={question:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"game-component-container"},s.a.createElement("p",{className:"App-subtitle"},"Ask Question ",this.props.number,":"),s.a.createElement("input",{type:"text",className:"main-input game-question-input",value:this.state.question,onChange:function(t){e.setState({question:t.target.value})}}),s.a.createElement("button",{onClick:function(){return e.props.sendQuestion(e.state.question)},className:"main-btn"},"Ask"),s.a.createElement("br",null),s.a.createElement("button",{onClick:this.props.goGuess,className:"main-btn"},"Straight to Guess"),s.a.createElement("br",null),s.a.createElement("br",null))}}]),t}(n.Component),d=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={question:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"game-component-container"},s.a.createElement("p",{className:"App-subtitle"},"Wait for the other player to make next move.."))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={guess:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"game-component-container"},s.a.createElement("p",{className:"App-subtitle"},"Guess the answer"),s.a.createElement("input",{type:"text",className:"main-input game-question-input",value:this.state.guess,onChange:function(t){e.setState({guess:t.target.value})}}),s.a.createElement("button",{onClick:function(){return e.props.guessAnswer(e.state.guess)},className:"main-btn"},"Guess"),s.a.createElement("br",null),this.props.canGoGoBackToAsk?s.a.createElement("button",{onClick:this.props.backToAsk,className:"main-btn"},"Back to Ask"):null,s.a.createElement("br",null),s.a.createElement("br",null))}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={question:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"game-component-container"},s.a.createElement("p",{className:"App-title"},"Result:"),this.props.answer&&this.props.guess&&this.props.answer===this.props.guess?s.a.createElement("p",{className:"App-subtitle"},"Successful Guess!"):null,this.props.answer&&this.props.guess&&this.props.answer!==this.props.guess?s.a.createElement("p",{className:"App-subtitle"},"Failed Guess!"):null,s.a.createElement("p",{className:"App-subtitle"},"The answer is ",this.props.answer),s.a.createElement("p",{className:"App-subtitle"},"The guess is ",this.props.guess),s.a.createElement("br",null),3===this.props.gameStatus?s.a.createElement("p",{className:"App-subtitle"},"The other player has left."):null,s.a.createElement("br",null),s.a.createElement("br",null))}}]),t}(n.Component),k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).leaveGame=function(){window.confirm("Are you sure leaving?")&&a.props.leaveGame()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{style:{margin:"30px"}},s.a.createElement("button",{onClick:this.leaveGame,className:"main-btn"},"Leave Game"))}}]),t}(n.Component),O=20,j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.getUserdataOfTheOtherUser()},a.componentWillMount=function(){a.checkIfReachMaxQuestion()},a.componentDidUpdate=function(){a.checkIfReachMaxQuestion()},a.getUserdataOfTheOtherUser=function(){var e;e=a.iAmHinter()?a.props.game.guesser:a.props.game.hinter,h.a.get(a.props.apiUrl+"/user/"+e).then(function(e){console.log(e),a.setState({encounterData:e.data.user})}).catch(function(e){console.log(e)})},a.checkIfReachMaxQuestion=function(){a.props.game.questions.length>=O&&0===a.props.game.questionStatus&&"ask"===a.state.mode&&a.setState({mode:"guess"})},a.iAmHinter=function(){return a.props.game.hinter===a.state.user._id},a.isQuestioning=function(){return 0===a.props.game.questionStatus},a.answerQuestion=function(e){var t=a.props.game;t.questions[t.questions.length-1].answer=e,t.questionStatus=0,a.sendGameUpdate(t)},a.sendQuestion=function(e){var t=a.props.game;t.questions.push({content:e}),t.questionStatus=1,a.sendGameUpdate(t)},a.guessAnswer=function(e){console.log("123");var t=a.props.game;t.guess=e,t.gameStatus=2,a.sendGameUpdate(t)},a.backToAsk=function(){a.setState({mode:"ask"})},a.goGuess=function(){a.setState({mode:"guess"})},a.sendGameUpdate=function(e){h.a.put(a.props.apiUrl+"/game/"+e._id,{updateContent:e}).then(function(e){})},a.state={user:a.props.user,mode:"ask",encounterData:{name:"",image:""}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.game.questions;return s.a.createElement("header",{className:"App-header"},s.a.createElement("div",{className:"game-charactors-container"},s.a.createElement("p",{className:"App-subtitle withMargin"},this.state.encounterData.name),s.a.createElement("img",{src:this.props.charactors[this.state.encounterData.charactor],className:"game-charactor-image"}),s.a.createElement("p",{className:"App-subtitle withMargin"},"V.S."),s.a.createElement("p",{className:"App-subtitle withMargin"},this.state.user.name),s.a.createElement("img",{src:this.props.charactors[this.state.user.charactor],className:"game-charactor-image"})),1===this.props.game.gameStatus?s.a.createElement("div",null,this.iAmHinter()&&!this.isQuestioning()?s.a.createElement(g,{number:e.length,content:e[e.length-1].content,answerQuestion:this.answerQuestion}):null,!this.iAmHinter()&&this.isQuestioning()&&"ask"===this.state.mode?s.a.createElement(b,{number:e.length+1,sendQuestion:this.sendQuestion,goGuess:this.goGuess}):null,this.iAmHinter()&&this.isQuestioning()?s.a.createElement(d,null):null,this.iAmHinter()||this.isQuestioning()?null:s.a.createElement(d,null),!this.iAmHinter()&&this.isQuestioning()&&"guess"===this.state.mode?s.a.createElement(E,{guessAnswer:this.guessAnswer,backToAsk:this.backToAsk,canGoGoBackToAsk:e.length<O}):null,s.a.createElement(f,{questions:this.props.game.questions})):null,this.props.game.gameStatus>=2?s.a.createElement(v,{answer:this.props.game.answer,guess:this.props.game.guess,gameStatus:this.props.game.gameStatus}):null,s.a.createElement(k,{leaveGame:this.props.leaveGame}))}}]),t}(n.Component),N=a(16),w=a.n(N),A="user_20qgame",S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).registerUser=function(){a.state.name.length>0?h.a.post(a.props.apiUrl+"/user",{name:a.state.name,charactor:a.state.selectedCharactor}).then(function(e){if(e.data.user){var t=e.data.user;localStorage[A]=JSON.stringify(t)}a.props.finishRegister(t)}).catch(function(e){console.log(e)}):alert("Please fill in your name")},a.state={name:"",selectedCharactor:0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("header",{className:"App-header"},s.a.createElement("img",{src:w.a,alt:"bigger-logo",className:"register-logo"}),s.a.createElement("p",{className:"App-title"},"Welcome"),s.a.createElement("p",{className:"App-subtitle"},"Please tell me your name"),s.a.createElement("input",{type:"text",placeholder:"Name Here",className:"main-input",value:this.state.name,onChange:function(t){e.setState({name:t.target.value})}}),s.a.createElement("p",{className:"App-subtitle"},"And Choose your charactor"),s.a.createElement("div",null,this.props.charactors.map(function(t,a){return s.a.createElement("button",{onClick:function(){e.setState({selectedCharactor:a})},key:"charactor_selector_"+a,className:a===e.state.selectedCharactor?"game-charactor selected":"game-charactor"},s.a.createElement("img",{alt:"game-charactor",src:t,className:"game-charactor-image"}))})),s.a.createElement("button",{onClick:this.registerUser,className:"main-btn"},"START"))}}]),t}(n.Component),C=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("header",{className:"App-header"},s.a.createElement("p",{className:"App-title"},"Hello ",this.props.user.name),s.a.createElement("p",{className:"App-subtitle"},"Select which charactor you like to be"),s.a.createElement("br",null),s.a.createElement("button",{onClick:function(){return e.props.chooseCharactor("guesser")},className:"main-btn"},"Guesser"),s.a.createElement("br",null),s.a.createElement("button",{onClick:function(){return e.props.chooseCharactor("hinter")},className:"main-btn"},"Hinter"))}}]),t}(n.Component),y=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("header",{className:"App-header"},s.a.createElement("p",{className:"App-title"},"Looking for a game to join..."))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).pressStart=function(){a.state.answer.length>0?a.props.createGame(a.state.answer):alert("Please fill the word to guess")},a.state={answer:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("header",{className:"App-header"},s.a.createElement("p",{className:"App-title"},"Please set up the word to guess"),s.a.createElement("input",{type:"text",placeholder:"word to guess",className:"main-input",value:this.state.answer,onChange:function(t){e.setState({answer:t.target.value})}}),s.a.createElement("button",{onClick:this.pressStart,className:"main-btn"},"START"))}}]),t}(n.Component),q=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"logo-container"},s.a.createElement("img",{src:w.a,alt:"logo",className:"logo"}))}}]),t}(n.Component),U=a(42),Q=a.n(U),_=[a(94),a(95),a(96),a(97)],T="https://ffc2107bf2614c2ebdfdf5edbc58f960.vfs.cloud9.us-east-2.amazonaws.com",x="user_20qgame",D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).componentWillMount=function(){a.connectToSocketServer()},a.connectToSocketServer=function(){var e=Q()(T);a.setState({socket:e},function(){a.state.socket.on("connect",function(){console.log("socket.id",e.id),a.checkUserData()}),a.state.socket.on("gameUpdate",function(e){console.log("gameUpdate",e),a.setState({game:e,stage:3})}),a.state.socket.on("match",function(e){console.log("match",e),a.state.socket.emit("join",{game:e._id}),a.setState({game:e,stage:3})})})},a.checkUserData=function(){var e=localStorage[x];if(e){var t,n=JSON.parse(e);console.log(T+"/user/"+n._id),h.a.get(T+"/user/"+n._id).then(function(e){e.data.user?e.data.user.inGame?(t=e.data.user,h.a.get(T+"/game/"+t.gameId).then(function(e){a.state.socket.emit("join",{game:e.data.game._id}),console.log("init: game:",e.data.game),a.setState({game:e.data.game,user:t,stage:3})}).catch(function(e){console.log(e)})):(t=e.data.user,a.setUserData(t)):a.setState({stage:0})}).catch(function(e){console.log(e)})}else a.setState({stage:0})},a.setUserData=function(e){a.setState({stage:1,user:e})},a.chooseCharactor=function(e){"hinter"===e?a.setState({stage:2.5}):"guesser"===e&&a.findGame()},a.findGame=function(){a.state.socket.emit("findGame",{userId:a.state.user._id}),a.setState({stage:2})},a.createGame=function(e){console.log("123"),h.a.post(T+"/game",{userId:a.state.user._id,answer:e}).then(function(e){if(console.log(e),e.data.game){var t=e.data.game;console.log(t),a.state.socket.emit("join",{game:t._id}),a.setState({stage:3,game:t})}}).catch(function(e){console.log(e)})},a.leaveGame=function(){a.state.socket.emit("leave",{game:a.state.game._id}),h.a.post(T+"/game/leave/"+a.state.game._id,{userId:a.state.user._id}).then(function(e){var t=a.state.user;t.inGame=!1,t.gameId="not_set",a.setState({stage:1,game:{},user:t})})},a.renderComponent=function(){switch(a.state.stage){case 0:return s.a.createElement(S,{finishRegister:a.setUserData,apiUrl:T,charactors:_});case 1:return s.a.createElement(C,{user:a.state.user,chooseCharactor:a.chooseCharactor});case 2:return s.a.createElement(y,null);case 2.5:return s.a.createElement(G,{createGame:a.createGame});case 3:return 0===a.state.game.gameStatus?s.a.createElement(y,null):s.a.createElement(j,{charactors:_,user:a.state.user,apiUrl:T,game:a.state.game,socket:a.state.socket,leaveGame:a.leaveGame});default:return s.a.createElement("p",null,"Loading...")}},a.state={stage:-1,user:{},answer:"Politics"},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(q,null),this.renderComponent(),s.a.createElement("div",null,"Icons made by ",s.a.createElement("a",{href:"https://www.freepik.com/",title:"Freepik"},"Freepik")," from ",s.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com")," is licensed by ",s.a.createElement("a",{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank"},"CC 3.0 BY")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,1,2]]]);
//# sourceMappingURL=main.d09528bb.chunk.js.map